(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},o={app:0},a=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/notes/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"36f5":function(t,e,s){"use strict";var n=s("7a77"),o=s.n(n);o.a},5452:function(t,e,s){"use strict";var n=s("af35"),o=s.n(n);o.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Loader",{class:t.getLoaderStatus?"active":""}),s("Header"),s("div",{staticClass:"page"},[s("div",{staticClass:"container"},[s("router-view")],1)]),s("Alert"),s("Confirm")],1)},a=[],i=s("5530"),r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loader"},[s("div",{staticClass:"loader__content"},[s("div",{staticClass:"loader__balls"},[s("div",{staticClass:"loader__balls-item"}),s("div",{staticClass:"loader__balls-item"}),s("div",{staticClass:"loader__balls-item"})])])])}],l={name:"Loader"},u=l,d=(s("a071"),s("2877")),m=Object(d["a"])(u,r,c,!1,null,null,null),f=m.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"header"},[s("div",{staticClass:"container"},[s("div",{staticClass:"header__row"},[s("router-link",{staticClass:"header__logo",attrs:{to:"/"}},[t._v("Notes")]),s("nav",{staticClass:"header__nav"},[t.isUserLoggedIn?[s("router-link",{staticClass:"header__nav-link",attrs:{to:"/",exact:""}},[t._v("Заметки")]),s("router-link",{staticClass:"header__nav-link",attrs:{to:"/note/add"}},[t._v("Добавить")])]:t._e()],2),!0===t.isUserLoggedIn?s("div",{staticClass:"header__account"},[s("div",{staticClass:"header__account-image"},[s("router-link",{attrs:{to:"/account",title:"Аккаунт"}},[t.getCurrentUser.photoURL?s("img",{attrs:{src:t.getCurrentUser.photoURL,alt:t.getCurrentUser.displayName}}):s("img",{attrs:{src:"https://via.placeholder.com/150",alt:t.getCurrentUser.displayName}})])],1)]):t._e(),!1===t.isUserLoggedIn?s("div",{staticClass:"header__options"},[s("router-link",{staticClass:"header__options-link",attrs:{to:"/registration",exact:"",title:"Регистрация"}},[s("i",{staticClass:"fas fa-user-plus"})]),s("router-link",{staticClass:"header__options-link",attrs:{to:"/sign-in",title:"Вход"}},[s("i",{staticClass:"fas fa-sign-in-alt"})])],1):t._e(),!0===t.isUserLoggedIn?s("div",{staticClass:"header__options"},[s("router-link",{staticClass:"header__options-link",attrs:{to:"/sign-out",title:"Выйти"}},[s("i",{staticClass:"fas fa-sign-out-alt"})])],1):t._e()],1)])])},p=[],v=s("2f62"),_={name:"Header",computed:Object(i["a"])({},Object(v["b"])(["isUserLoggedIn","getCurrentUser"]))},g=_,b=(s("5452"),Object(d["a"])(g,h,p,!1,null,null,null)),C=b.exports,w={name:"App",components:{Loader:f,Header:C},computed:Object(i["a"])({},Object(v["b"])(["getLoaderStatus"])),beforeCreate:function(){this.$store.commit("initialiseStore"),this.$store.commit("checkAuthState")}},x=w,y=(s("5c0b"),Object(d["a"])(x,o,a,!1,null,null,null)),N=y.exports,U=(s("4160"),s("a434"),s("159b"),s("96cf"),s("1da1")),S=s("59ca");s("e71f"),s("ea7b");n["a"].use(v["a"]);var O={apiKey:"AIzaSyAdWVWEcdQkhdqjjEkYlF-KqdeC-chG2Wg",authDomain:"notes-2032c.firebaseapp.com",databaseURL:"https://notes-2032c.firebaseio.com",projectId:"notes-2032c",storageBucket:"notes-2032c.appspot.com",messagingSenderId:"140528471068"};S["initializeApp"](O);var k=S["firestore"](),E=new v["a"].Store({state:{loaderActive:!1,userLoggedIn:!1,currentUser:{providerId:"",uid:"",displayName:"",email:"",photoURL:""},notes:[]},methods:{},getters:{getLoaderStatus:function(t){return t.loaderActive},isUserLoggedIn:function(t){return t.userLoggedIn},getCurrentUser:function(t){return t.currentUser},getNotes:function(t){return t.notes}},mutations:{checkAuthState:function(t){S["auth"]().onAuthStateChanged((function(e){e&&(t.currentUser.providerId=e.providerId,t.currentUser.uid=e.uid,t.currentUser.displayName=e.displayName,t.currentUser.email=e.email,t.currentUser.photoURL=e.photoURL)}))},setNotes:function(t,e){void 0!==e&&(t.notes=e)},addNote:function(t,e){t.notes.unshift(e);var s=k.collection("users");s.doc(t.currentUser.uid).set({notes:t.notes})},deleteNote:function(t,e){t.notes.forEach((function(s,n){if(s.id===e){t.notes.splice(n,1);var o=k.collection("users");o.doc(t.currentUser.uid).set({notes:t.notes})}}))},saveNote:function(t,e){t.notes.forEach((function(s,n){if(s.id===e.id){t.notes.splice(n,1,e);var o=k.collection("users");o.doc(t.currentUser.uid).set({notes:t.notes})}}))},initialiseStore:function(t){localStorage.getItem("store")&&this.replaceState(Object.assign(t,JSON.parse(localStorage.getItem("store"))))},signOutUser:function(t){t.userLoggedIn=!1}},actions:{createUser:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.userEmail,o=e.userPassword,s.next=3,S["auth"]().createUserWithEmailAndPassword(n,o).then((function(){var e=S["auth"]().currentUser,s=k.collection("users");e&&s.doc(e.uid).set({notes:t.state.notes})}));case 3:case"end":return s.stop()}}),s)})))()},signInUser:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.userEmail,o=e.userPassword,s.next=3,S["auth"]().signInWithEmailAndPassword(n,o).then((function(){t.state.userLoggedIn=!0,t.dispatch("getNotesUser")}));case 3:case"end":return s.stop()}}),s)})))()},signOutUser:function(t){return Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S["auth"]().signOut().then((function(){t.commit("signOutUser")}));case 2:case"end":return e.stop()}}),e)})))()},updateProfileUser:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function s(){var n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.userName,o=e.userPhotoURL,s.next=3,S["auth"]().currentUser.updateProfile({displayName:n,photoURL:o}).then((function(){t.commit("checkAuthState")}));case 3:case"end":return s.stop()}}),s)})))()},updateEmailUser:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.userEmail,s.next=3,S["auth"]().currentUser.updateEmail(n).then((function(){t.commit("checkAuthState")}));case 3:case"end":return s.stop()}}),s)})))()},getNotesUser:function(t){S["auth"]().onAuthStateChanged(function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s){e.next=3;break}return e.next=3,k.collection("users").doc(s.uid).get().then((function(e){e.exists?t.commit("setNotes",e.data().notes):console.log("No such document!")})).catch((function(t){console.log("Error getting document:",t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},modules:{}}),$=(s("45fc"),s("b0c0"),s("8c4f")),T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isUserLoggedIn?s("Notes"):s("SignInUser")},I=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==t.getNotes.length?s("div",{staticClass:"notes"},t._l(t.getNotes,(function(t,e){return s("NoteItem",{key:t.id,attrs:{note:t,index:e}})})),1):s("div",{staticClass:"align-center"},[t._v(" Заметок пока что нет. "),s("router-link",{attrs:{to:"/note/add"}},[t._v("Добавьте свою первую заметку")])],1)},j=[],R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"note"},[s("div",{staticClass:"note-title"},[t._v(t._s(t.note.title))]),s("div",{staticClass:"todos"},[s("div",{staticClass:"todos__list"},t._l(t.note.todos.slice(0,3),(function(e,n){return s("div",{key:n,staticClass:"todos__list-item",class:e.completed?"completed":""},[s("p",[t._v(t._s(e.title))])])})),0)]),s("div",{staticClass:"note__options"},[s("router-link",{staticClass:"btn btn_bg_blue",attrs:{to:{name:"note",params:{id:t.note.id}}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{staticClass:"btn btn_bg_deeppinc",attrs:{type:"button"},on:{click:function(e){return t.deleteNote(t.note.id)}}},[s("i",{staticClass:"fas fa-trash-alt"})])],1)])},L=[],A=(s("a9e3"),{name:"NoteItem",props:{index:Number,note:Object},methods:{deleteNote:function(t){var e=this,s={title:"Вы уверенны что хотите удалить замеку?",confirmText:"Подтвердить",cancelText:"Отменить",onConfirm:function(){return e.$store.commit("deleteNote",t)}};this.$confirm.show(s)}}}),J=A,M=(s("9f0c"),Object(d["a"])(J,R,L,!1,null,"2e1b578a",null)),q=M.exports,H={name:"Notes",data:function(){return{}},components:{NoteItem:q},computed:Object(i["a"])({},Object(v["b"])(["getNotes"]))},B=H,D=(s("fd6b"),Object(d["a"])(B,P,j,!1,null,"96f383f8",null)),F=D.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-form"},[s("div",{staticClass:"notes-form__form"},[s("h1",{staticClass:"notes-form__title"},[t._v("Вход")]),s("form",{attrs:{action:"/",method:"get"},on:{submit:function(e){return e.preventDefault(),t.signInUser(e)}}},[s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-email"}},[t._v("Введите Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userEmail,expression:"userEmail"}],attrs:{type:"email",id:"user-email",placeholder:""},domProps:{value:t.userEmail},on:{input:function(e){e.target.composing||(t.userEmail=e.target.value)}}})]),s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-password"}},[t._v("Введите пароль")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userPassword,expression:"userPassword"}],attrs:{id:"user-password",type:"password",placeholder:""},domProps:{value:t.userPassword},on:{input:function(e){e.target.composing||(t.userPassword=e.target.value)}}})]),t._m(0)])])])},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-form__btn"},[s("button",{staticClass:"btn btn-medium",attrs:{type:"submit"}},[t._v("Войти")])])}],z={name:"SignInUser",data:function(){return{userEmail:"",userPassword:""}},methods:{signInUser:function(){var t=this;this.$store.dispatch("signInUser",{userEmail:this.userEmail,userPassword:this.userPassword}).then((function(){t.$alert.show({title:"Вы успешно вошли в аккаунт.",className:"success"}),t.$router.push("/note/add")})).catch((function(e){t.errorMessage=e.message,t.$alert.show({title:e.message,className:"error"})}))}}},G=z,Q=Object(d["a"])(G,W,K,!1,null,null,null),V=Q.exports,Y={name:"Home",data:function(){return{}},components:{Notes:F,SignInUser:V},computed:Object(i["a"])({},Object(v["b"])(["isUserLoggedIn"]))},X=Y,Z=(s("7f57"),Object(d["a"])(X,T,I,!1,null,"378f7b78",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-form"},[s("form",{staticClass:"notes-form__form",attrs:{action:"/",method:"post"}},[s("h1",{staticClass:"notes-form__title"},[t._v("Регистрация")]),s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-email"}},[t._v("Введите Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userEmail,expression:"userEmail"}],attrs:{type:"email",id:"user-email",placeholder:""},domProps:{value:t.userEmail},on:{input:function(e){e.target.composing||(t.userEmail=e.target.value)}}})]),s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-password"}},[t._v("Введите пароль")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userPassword,expression:"userPassword"}],attrs:{id:"user-password",type:"password",placeholder:""},domProps:{value:t.userPassword},on:{input:function(e){e.target.composing||(t.userPassword=e.target.value)}}})]),s("div",{staticClass:"notes-form__btn"},[s("button",{staticClass:"btn btn-medium",attrs:{type:"button"},on:{click:t.createUser}},[t._v(" Создать аккаунт ")])])]),s("div",{staticClass:"notes-form__info"},[t._v(" Если у Вас уже есть аккаунт нажмите "),s("router-link",{attrs:{to:"/sign-in"}},[t._v("Войти")])],1)])},st=[],nt={name:"CreateUser",data:function(){return{userEmail:"",userPassword:""}},methods:{createUser:function(){var t=this;this.$store.dispatch("createUser",{userEmail:this.userEmail,userPassword:this.userPassword}).then((function(){t.$store.dispatch("signInUser",{userEmail:t.userEmail,userPassword:t.userPassword}),t.$alert.show({title:"Пользователь успешно создан",className:"success"}),t.$router.push("/account")})).catch((function(e){t.$alert.show({title:e.message,className:"error"})}))}}},ot=nt,at=Object(d["a"])(ot,et,st,!1,null,null,null),it=at.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-form"},[s("div",{staticClass:"notes-form__form"},[s("h1",{staticClass:"notes-form__title"},[t._v("Аккаунт")]),s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.getCurrentUser.email,expression:"getCurrentUser.email"}],ref:"userEmail",attrs:{type:"email",id:"user-email",placeholder:""},domProps:{value:t.getCurrentUser.email},on:{input:function(e){e.target.composing||t.$set(t.getCurrentUser,"email",e.target.value)}}})]),s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-name"}},[t._v("Имя")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.getCurrentUser.displayName,expression:"getCurrentUser.displayName"}],ref:"userName",attrs:{type:"text",id:"user-name",placeholder:""},domProps:{value:t.getCurrentUser.displayName},on:{input:function(e){e.target.composing||t.$set(t.getCurrentUser,"displayName",e.target.value)}}})]),s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"user-photo"}},[t._v("Фото")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.getCurrentUser.photoURL,expression:"getCurrentUser.photoURL"}],ref:"userPhoto",attrs:{type:"url",id:"user-photo",placeholder:""},domProps:{value:t.getCurrentUser.photoURL},on:{input:function(e){e.target.composing||t.$set(t.getCurrentUser,"photoURL",e.target.value)}}})]),s("div",{staticClass:"notes-form__field"},[s("div",{staticClass:"notes-form__field-avatar"},[t.getCurrentUser.photoURL?s("img",{attrs:{src:t.getCurrentUser.photoURL,alt:""}}):s("img",{attrs:{src:"https://via.placeholder.com/150",alt:""}})])]),s("div",{staticClass:"notes-form__btn"},[s("button",{staticClass:"btn btn-medium",attrs:{type:"button"},on:{click:t.updateProfileUser}},[t._v(" Сохранить ")])])])])},ct=[],lt={name:"AccountUser",data:function(){return{}},computed:Object(i["a"])({},Object(v["b"])(["getCurrentUser"])),methods:Object(i["a"])({},Object(v["c"])(["checkAuthState"]),{updateProfileUser:function(){var t=this;this.$store.dispatch("updateProfileUser",{userName:this.$refs.userName.value,userPhotoURL:this.$refs.userPhoto.value}).then((function(){t.$alert.show({title:"Данные успешно сохранены",className:"success"})})).catch((function(e){t.errorMessage=e.message,t.$alert.show({title:e.message,className:"error"})})),this.$store.dispatch("updateEmailUser",{userEmail:this.$refs.userEmail.value}).then((function(){t.$alert.show({title:"Email успешно сохранен",className:"success"})})).catch((function(e){t.errorMessage=e.message,t.$alert.show({title:e.message,className:"error"})}))}})},ut=lt,dt=Object(d["a"])(ut,rt,ct,!1,null,null,null),mt=dt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-form"},[s("h2",{staticClass:"notes-form__title"},[t._v("Добавление заметки")]),s("div",{staticClass:"notes-form__form"},[s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"note-title"}},[t._v("Название заметки:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.noteTitle,expression:"noteTitle"}],attrs:{type:"text",id:"note-title",placeholder:""},domProps:{value:t.noteTitle},on:{input:function(e){e.target.composing||(t.noteTitle=e.target.value)}}})]),s("div",{staticClass:"todos"},[s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"todo-title"}},[t._v("Задача:")]),s("div",{staticClass:"notes-form__field--todo"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.todoTitle,expression:"todoTitle"}],ref:"todotitle",attrs:{rows:"1",placeholder:""},domProps:{value:t.todoTitle},on:{input:[function(e){e.target.composing||(t.todoTitle=e.target.value)},function(e){return t.autoHeight(e)}]}}),s("button",{staticClass:"btn btn_bg_blue",attrs:{type:"button"},on:{click:t.addTodo}},[s("i",{staticClass:"fas fa-plus"})])])]),s("div",{staticClass:"todos__list"},[this.todos.length?s("div",{staticClass:"todos__list-item-wrap"},t._l(this.todos,(function(e,n){return s("div",{key:n,staticClass:"todos__list-item"},[s("p",[t._v(t._s(e.title))]),s("div",{staticClass:"todos__list-item-options"},[s("button",{staticClass:"btn btn_bg_deeppinc",attrs:{type:"button"},on:{click:function(e){return t.removeTodo(n)}}},[s("i",{staticClass:"fas fa-trash-alt"})])])])})),0):s("div",{staticClass:"todos__list-item empty"},[t._v("Задач пока-что нет.")])])]),s("div",{staticClass:"notes-form__btn"},[s("button",{staticClass:"btn btn-medium",attrs:{type:"button"},on:{click:t.addNote}},[t._v(" Сохранить заметку ")])])])])},ht=[],pt=(s("ac1f"),s("1276"),s("498a"),{name:"NoteAdd",data:function(){return{noteTitle:"",todoTitle:"",textareaRows:1,todos:[],note:{id:null,title:"",todos:[]}}},methods:{autoHeight:function(t){var e=t.target.value.split(/\r\n|\r|\n/).length;t.target.rows=this.textareaRows=e},addTodo:function(){0!==this.todoTitle.trim().length&&(this.todos.unshift({id:Date.now(),title:this.todoTitle,completed:!1,editable:!1,textareaRows:this.textareaRows}),this.todoTitle="",this.$refs.todotitle.setAttribute("rows",1))},removeTodo:function(t){this.todos.splice(t,1)},addNote:function(){0!==this.noteTitle.trim().length&&0!==this.todos.length&&(this.note.id=Date.now(),this.note.title=this.noteTitle,this.note.todos=this.todos,this.$store.commit("addNote",this.note),this.$router.push({path:"/"}))}}}),vt=pt,_t=Object(d["a"])(vt,ft,ht,!1,null,null,null),gt=_t.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-form"},[s("h2",{staticClass:"notes-form__title"},[t._v("Редактирование заметки")]),s("div",{staticClass:"notes-form__form"},[s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"note-title"}},[t._v("Название заметки:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentState.title,expression:"currentState.title"}],attrs:{type:"text",id:"note-title",placeholder:""},domProps:{value:t.currentState.title},on:{change:t.onNoteChange,input:function(e){e.target.composing||t.$set(t.currentState,"title",e.target.value)}}})]),s("div",{staticClass:"todos"},[s("div",{staticClass:"notes-form__field"},[s("label",{attrs:{for:"todo-title"}},[t._v("Задача:")]),s("div",{staticClass:"notes-form__field--todo"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.todoTitle,expression:"todoTitle"}],ref:"todotitle",attrs:{id:"todo-title",placeholder:"",rows:"1"},domProps:{value:t.todoTitle},on:{change:t.onNoteChange,input:[function(e){e.target.composing||(t.todoTitle=e.target.value)},function(e){return t.autoHeight(e)}]}}),s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.addTodo}},[s("i",{staticClass:"fas fa-plus"})])])]),s("div",{staticClass:"todos__list"},[t.currentState.todos.length?s("div",{staticClass:"todos__list-item-wrap"},t._l(t.currentState.todos,(function(e,n){return s("div",{key:n,staticClass:"todos__list-item todos__list-item--editable"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"todo.title"}],ref:"todoitem",refInFor:!0,class:[e.editable?"editable":"",e.completed?"completed":""],attrs:{rows:e.textareaRows,disabled:!e.editable},domProps:{value:e.title},on:{input:[function(s){s.target.composing||t.$set(e,"title",s.target.value)},function(e){return t.autoHeight(e)}],blur:function(e){return t.editTotoFocusOut(n)}}}),s("div",{staticClass:"todos__list-item-options"},[s("button",{staticClass:"btn btn_bg_deeppinc",attrs:{type:"button",title:"Удалить"},on:{click:function(e){return t.removeTodo(n)}}},[s("i",{staticClass:"fas fa-trash-alt"})]),s("button",{staticClass:"btn btn_bg_blue",attrs:{type:"button",title:"Отредактировать текст"},on:{click:function(e){return t.editTodo(n)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{staticClass:"btn",attrs:{type:"button",title:"Отметить как выполненный"},on:{click:function(e){return t.completeTodo(n)}}},[s("i",{staticClass:"fas fa-check"})])])])})),0):s("div",{staticClass:"todos__list-item empty"},[t._v("Задач пока-что нет.")])])]),s("div",{staticClass:"notes-form__btn"},[s("button",{staticClass:"btn",attrs:{type:"button",title:"Сохранить"},on:{click:t.saveNote}},[s("i",{staticClass:"fas fa-save"})]),s("button",{staticClass:"btn btn_bg_yellow",attrs:{title:"Отменить редактирование"},on:{click:t.cancelEdit}},[s("i",{staticClass:"fas fa-times"})]),s("button",{staticClass:"btn btn_bg_deeppinc",attrs:{type:"button",title:"Удалить"},on:{click:function(e){return t.deleteNote(t.noteId)}}},[s("i",{staticClass:"fas fa-trash-alt"})]),s("button",{staticClass:"btn btn_bg_blue",attrs:{type:"button",title:"Отменить внесенное изменение",disabled:0===t.changesIndex},on:{click:t.onUndo}},[s("i",{staticClass:"fas fa-undo-alt"})]),s("button",{staticClass:"btn btn_bg_blue",attrs:{type:"button",title:"Повторить отмененное изменение",disabled:t.changesIndex===t.changesState.length-1},on:{click:t.onRedo}},[s("i",{staticClass:"fas fa-redo-alt"})])])])])},Ct=[],wt={name:"NoteEdit",data:function(){return{noteId:null,textareaRows:1,todoTitle:"",currentState:Object,changesState:[],changesIndex:0}},methods:{deleteNote:function(t){var e=this;this.$confirm.show({title:"Вы уверенны что хотите удалить замеку?",confirmText:"Подтвердить",cancelText:"Отменить",onConfirm:function(){return e.isConfirmDelete(t)}})},isConfirmDelete:function(t){this.$store.commit("deleteNote",t),this.$router.push({path:"/"})},autoHeight:function(t){var e=t.target.value.split(/\r\n|\r|\n/).length;t.target.rows=this.textareaRows=e},editTotoFocusOut:function(t){var e=this.currentState.todos[t].textareaRows;this.currentState.todos[t].editable=!1,e>1?e=this.textareaRows:this.textareaRows=1},addTodo:function(){0!==this.todoTitle.trim().length&&(this.currentState.todos.unshift({id:Date.now(),title:this.todoTitle,completed:!1,editable:!1,textareaRows:this.textareaRows}),this.todoTitle="",this.onNoteChange(),this.$refs.todotitle.setAttribute("rows",1))},editTodo:function(t){this.currentState.todos[t].editable=!0,this.$nextTick((function(){this.$refs.todoitem[t].focus()}))},removeTodo:function(t){this.currentState.todos.splice(t,1),this.onNoteChange()},completeTodo:function(t){this.currentState.todos[t].completed=!this.currentState.todos[t].completed,this.onNoteChange()},onNoteChange:function(){this.changesState.length=++this.changesIndex;var t=JSON.parse(JSON.stringify(this.currentState));this.changesState.push(t)},saveNote:function(){var t=JSON.parse(JSON.stringify(this.currentState));this.$store.commit("saveNote",t),this.$router.push({path:"/"})},cancelEdit:function(){var t=this;this.$confirm.show({title:"Вы уверенны что хотите отменить редактирование?",confirmText:"Подтвердить",cancelText:"Отменить",onConfirm:function(){return t.$router.push({path:"/"})}})},keyEvents:function(t){var e=(window.event,t);(90===e.keyCode&&e.ctrlKey||27===e.keyCode||90===e.keyCode&&91===e.keyCode||90===e.keyCode&&93===e.keyCode)&&this.onUndo(),89===e.keyCode&&e.ctrlKey&&this.onRedo()},onUndo:function(){this.changesIndex>0&&(this.currentState=JSON.parse(JSON.stringify(this.changesState[--this.changesIndex])))},onRedo:function(){this.changesIndex<this.changesState.length-1&&(this.currentState=JSON.parse(JSON.stringify(this.changesState[++this.changesIndex])))}},beforeMount:function(){var t=this;this.noteId=parseInt(this.$route.params.id),this.$store.state.notes.forEach((function(e){e.id===t.noteId&&(t.currentState=JSON.parse(JSON.stringify(e)),t.changesState.push(JSON.parse(JSON.stringify(e))))})),document.addEventListener("keyup",(function(e){t.keyEvents(e)}))}},xt=wt,yt=Object(d["a"])(xt,bt,Ct,!1,null,"2d6d5b8b",null),Nt=yt.exports,Ut=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},St=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"not-found"},[s("div",{staticClass:"not-found__title"},[t._v("404")]),s("div",{staticClass:"not-found__subtitle"},[t._v("Страница не найдена!")])])}],Ot={name:"NotFound"},kt=Ot,Et=(s("6fb9"),Object(d["a"])(kt,Ut,St,!1,null,null,null)),$t=Et.exports;n["a"].use($["a"]);var Tt=[{path:"*",component:$t},{path:"/",name:"home",meta:{requiresAuth:!0},component:tt},{path:"/registration",name:"registration",component:it},{path:"/sign-in",name:"sign-in",component:V},{path:"/sign-out",name:"sign-out",meta:{requiresAuth:!0}},{path:"/account",name:"account",meta:{requiresAuth:!0},component:mt},{path:"/note/add",name:"note-add",meta:{requiresAuth:!0},component:gt},{path:"/note/:id",name:"note",meta:{requiresAuth:!0},component:Nt}],It=new $["a"]({mode:"hash",base:"/notes/",routes:Tt});It.beforeEach((function(t,e,s){if(t.matched.some((function(t){return t.meta.requiresAuth}))){var n=JSON.parse(localStorage.getItem("store")).userLoggedIn;localStorage.getItem("notes")&&n?s({path:"/sign-in",query:{redirect:t.fullPath}}):"sign-out"===t.name?E.dispatch("signOutUser").then((function(){s({path:"/sign-in"})})):s()}else s()}));var Pt=It,jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.visibility?s("div",{staticClass:"confirm"},[s("div",{staticClass:"confirm__content"},[s("h2",{staticClass:"confirm__title"},[t._v(t._s(t.title))]),s("div",{staticClass:"confirm__buttons"},[s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.confirm}},[t._v(" "+t._s(t.confirmText)+" ")]),s("button",{staticClass:"btn btn_bg_deeppinc",attrs:{type:"button"},on:{click:t.cancel}},[t._v(" "+t._s(t.cancelText)+" ")])])])]):t._e()},Rt=[],Lt={name:"Confirm",data:function(){return{visibility:!1,title:"",confirmText:"",cancelText:"",onConfirm:{}}},methods:{confirm:function(){"function"===typeof this.onConfirm?(this.onConfirm(),this.cancel()):this.cancel()},cancel:function(){this.visibility=!1},show:function(t){this.visibility=!0,this.title=t.title,this.confirmText=t.confirmText,this.cancelText=t.cancelText,this.onConfirm=t.onConfirm}},beforeMount:function(){var t=this;Ht.EventBus.$on("show",(function(e){t.show(e)}))}},At=Lt,Jt=(s("36f5"),Object(d["a"])(At,jt,Rt,!1,null,"0baf67e3",null)),Mt=Jt.exports,qt={install:function(t){this.EventBus=new t,t.component("Confirm",Mt),t.prototype.$confirm={show:function(t){qt.EventBus.$emit("show",t)}}}},Ht=qt,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.visibility?s("div",{staticClass:"alert"},[s("transition-group",{attrs:{name:"fade"}},t._l(t.messages,(function(e){return s("div",{key:e.index,staticClass:"alert__message",class:e.className},[s("h6",{staticClass:"alert__title"},[t._v(t._s(e.title))])])})),0)],1):t._e()},Dt=[],Ft={name:"Alert",data:function(){return{visibility:!1,messages:[],index:0,className:"",title:""}},methods:{show:function(t){var e=this,s=this.title=t.title,n=this.className=t.className,o={index:this.index++,title:s,className:n};this.messages.push(o),this.visibility=!0,setTimeout((function(){e.messages.shift()}),4e3),0===this.messages.length&&(this.visibility=!1)}},beforeMount:function(){var t=this;Qt.EventBus.$on("show",(function(e){t.show(e)}))}},Wt=Ft,Kt=(s("8235"),Object(d["a"])(Wt,Bt,Dt,!1,null,"ed0e73a6",null)),zt=Kt.exports,Gt={install:function(t){this.EventBus=new t,t.component("Alert",zt),t.prototype.$alert={show:function(t){Gt.EventBus.$emit("show",t)}}}},Qt=Gt;n["a"].config.productionTip=!0,n["a"].use(Ht),n["a"].use(Qt),E.subscribe((function(t,e){localStorage.setItem("store",JSON.stringify(e))})),new n["a"]({store:E,router:Pt,render:function(t){return t(N)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var n=s("9c0c"),o=s.n(n);o.a},"61ab":function(t,e,s){},"6fb9":function(t,e,s){"use strict";var n=s("61ab"),o=s.n(n);o.a},"72af":function(t,e,s){},"7a77":function(t,e,s){},"7bb7":function(t,e,s){},"7f57":function(t,e,s){"use strict";var n=s("b4b6"),o=s.n(n);o.a},8235:function(t,e,s){"use strict";var n=s("b33f"),o=s.n(n);o.a},"9c0c":function(t,e,s){},"9f0c":function(t,e,s){"use strict";var n=s("72af"),o=s.n(n);o.a},a071:function(t,e,s){"use strict";var n=s("c25f"),o=s.n(n);o.a},af35:function(t,e,s){},b33f:function(t,e,s){},b4b6:function(t,e,s){},c25f:function(t,e,s){},fd6b:function(t,e,s){"use strict";var n=s("7bb7"),o=s.n(n);o.a}});
//# sourceMappingURL=app.7e93a3ee.js.map